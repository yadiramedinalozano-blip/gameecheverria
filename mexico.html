<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Ciudad de M√©xico ‚Äî Colapso Sur</title>
  <link rel="icon" type="image/png" href="imagenes/icono.png">
  <link rel="stylesheet" href="style.css"/>
  <style>
    body {
      text-align: center;
      padding: 1rem;
      background: #111;
      color: #fff;
    }
    .wrap {max-width: 960px; margin: 0 auto;}
    .mercado {
      width: 100%;
      border-radius: 12px;
      margin: 1rem 0;
    }
    .scene {
      background: rgba(20,20,25,.55);
      border: 1px solid rgba(255,255,255,.12);
      border-radius: 12px;
      padding: 1.2rem;
      text-align: left;
      margin-bottom: 2rem;
    }
    .scene p {margin: .8rem 0;}

    .choices {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      gap: 1rem;
      margin-top: 2rem;
    }
    .decidir {
      display: flex;
      align-items: flex-start;
      gap: 0.6rem;
      background: linear-gradient(135deg, #ffd76f, #ff9f8b);
      color: #111;
      font-weight: 700;
      padding: 1rem;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      font-size: 1rem;
      text-align: left;
      line-height: 1.4;
      transition: transform .2s, box-shadow .2s, filter .3s;
    }
    .decidir:hover {
      transform: translateY(-3px);
      box-shadow: 0 0 12px rgba(255,255,255,0.3);
      filter: brightness(1.1);
    }

    /* Imagen de explosi√≥n */
    .bomba {
      position: fixed;
      top: 0; left: 0;
      width: 100%;
      height: 100%;
      background: url('imagenes/bomba.png') no-repeat center center;
      background-size: cover;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.2s ease;
      z-index: 9999;
    }
    .bomba.active {
      opacity: 1;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>Ciudad de M√©xico</h1>
      <p class="subtitle">Ruinas, neones rotos y memoria en movimiento.</p>
    </header>

    <img src="imagenes/mercado.png" alt="Mercado en ruinas" class="mercado"/>

    <section class="scene">
      <p>
        Gracias a las mutaciones y a un poco de suerte has logrado sobrevivir durante diez a√±os
        desde el inicio del colapso. Sin embargo, las mutaciones dieron origen a clanes y la escasez
        cre√≥ facciones que controlan los recursos y establecieron sus propios modos de vida.
      </p>
      <p>¬øA qu√© facci√≥n te uniste?</p>
    </section>

    <main class="choices">
      <button class="decidir" data-ethos="realista" data-points="1" data-next="mexico2.html">
        ‚õΩ Facci√≥n del combustible: controla los dep√≥sitos y calcula los bidones restantes.
      </button>

      <button class="decidir" data-ethos="romantico" data-points="1" data-next="mexico2.html">
        üåæ Facci√≥n agr√≠cola: cultiva hongos y hierbas medicinales para sobrevivir.
      </button>

      <button class="decidir" data-ethos="clasico" data-points="1" data-next="mexico2.html">
        ‚öôÔ∏è Facci√≥n tecnol√≥gica: busca, repara, recicla y ense√±a el uso de herramientas.
      </button>

      <button class="decidir" data-ethos="barroco" data-points="1" data-next="mexico2.html">
        üßµ Facci√≥n recolectora: transforma ropa y objetos en nuevas modas del fin del mundo.
      </button>
    </main>
  </div>

  <!-- Imagen de explosi√≥n -->
  <div class="bomba" id="bomba"></div>

  <script src="js/game.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', ()=>{
      const bomba = document.getElementById('bomba');

      document.querySelectorAll('.decidir').forEach(btn=>{
        btn.addEventListener('click', ()=>{
          const ethos = btn.dataset.ethos;
          const pts = Number(btn.dataset.points || 1);
          const next = btn.dataset.next || 'mexico2.html';
          addPoint(ethos, pts);

          // Mostrar la imagen de explosi√≥n
          bomba.classList.add('active');

          // Esperar 0.5 segundos y redirigir
          setTimeout(()=>{
            window.location.href = next;
          }, 500);
        });
      });
    });
  </script>
</body>
</html>
